<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="./home_files/all.min.css">
    <link href="./home_files/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./home_files/style.css">
    
    <title>Detail článku #1024 | Raketoví inženýři</title>

    <style>
        /* Styl pro chat/komentáře */
        .chat-box {
            background-color: #1c1e26;
            border: 1px solid #2d3748;
            border-radius: 12px;
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        .message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 8px;
            max-width: 85%;
        }
        .message.editor {
            background-color: rgba(110, 43, 249, 0.2);
            border-left: 3px solid #6e2bf9;
            margin-left: auto; /* Zarovnání doprava */
        }
        .message.author {
            background-color: rgba(255, 255, 255, 0.05);
            border-left: 3px solid #94a3b8;
        }
        .message-meta {
            font-size: 0.75rem;
            color: #94a3b8;
            margin-bottom: 4px;
        }
        /* Papírový vzhled pro článek */
        .article-paper {
            background-color: #fff;
            color: #000;
            padding: 40px;
            border-radius: 4px;
            min-height: 600px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-dark navbar-render sticky-top">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center gap-2" href="index.php">
                <i class="fa-solid fa-rocket"></i>
                RAKETOVÍ INŽENÝŘI <span class="badge bg-danger ms-2 text-white" style="font-size: 0.7rem;">ADMIN</span>
            </a>
            <div class="ms-auto">
                <a class="btn btn-sm btn-outline-light" href="admin.html"><i class="fa-solid fa-arrow-left me-2"></i>Zpět na přehled</a>
            </div>
        </div>
    </nav>

    <div class="container my-5">
        
        <div class="row mb-4 align-items-center">
            <div class="col-md-8">
                <span class="badge bg-secondary mb-2">Věda</span>
                <h1 class="fw-bold">Vliv mikrogravitace na růst rajčat</h1>
                <p class="text-muted mb-0">Autor: <strong>Jan Novák</strong> | Nahráno: 09.12.2025</p>
                <div class="mt-2" id="articleStatusBadge">
                    <span class="badge bg-warning text-dark">Stav: Nový (Čeká na formální kontrolu)</span>
                </div>
            </div>
            
            <div class="col-md-4 text-end">
                <div class="card bg-dark border-secondary">
                    <div class="card-body">
                        <h6 class="card-title text-white mb-3">Formální kontrola</h6>
                        <div class="d-grid gap-2">
                            <button class="btn btn-warning text-dark" data-bs-toggle="modal" data-bs-target="#returnModal">
                                <i class="fa-solid fa-rotate-left me-2"></i>Vrátit k dopracování
                            </button>
                            <button class="btn btn-success" onclick="app.approveArticle()">
                                <i class="fa-solid fa-check me-2"></i>Schválit a poslat dál
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-8 mb-4">
                <div class="article-paper">
                    <h2 class="mb-4">Abstrakt</h2>
                    <p>Tato studie se zabývá experimentálním pěstováním Solanum lycopersicum v podmínkách simulované mikrogravitace...</p>
                    <hr>
                    <h3>1. Úvod</h3>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                    <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    <h3>2. Metodika</h3>
                    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
                    <br><br>
                    <p class="text-center text-muted fst-italic">[... Zbytek článku ...]</p>
                </div>
            </div>

            <div class="col-lg-4">
                <h4 class="mb-3">Komunikace s autorem</h4>
                
                <div class="chat-box mb-3" id="chatHistory">
                    <div class="message author">
                        <div class="message-meta"><i class="fa-solid fa-user me-1"></i> Jan Novák • 09.12. 10:00</div>
                        <div>Dobrý den, posílám článek ke kontrole. Citace jsem upravil dle normy.</div>
                    </div>
                </div>

                <div class="input-group">
                    <input type="text" id="chatInput" class="form-control" placeholder="Napsat rychlou zprávu...">
                    <button class="btn btn-primary" onclick="app.sendMessage()"><i class="fa-solid fa-paper-plane"></i></button>
                </div>
            </div>
        </div>

    </div>

    <div class="modal fade" id="returnModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content bg-dark border-secondary text-white">
                <div class="modal-header border-secondary">
                    <h5 class="modal-title">Vrátit článek autorovi</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <label class="form-label">Důvod vrácení (co je třeba opravit):</label>
                    <textarea class="form-control mb-3" id="returnReason" rows="4" placeholder="Např: Špatné formátování citací, chybí abstrakt v angličtině..."></textarea>
                    
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" checked disabled>
                        <label class="form-check-label text-muted">
                            Autorovi bude odeslán e-mail s notifikací.
                        </label>
                    </div>
                </div>
                <div class="modal-footer border-secondary">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Zrušit</button>
                    <button type="button" class="btn btn-warning text-dark" onclick="app.returnArticle()">Odeslat připomínky</button>
                </div>
            </div>
        </div>
    </div>

    <script src="./home_files/bootstrap.bundle.min.js.stažený soubor"></script>

    <script>
        const app = {
            // Funkce pro schválení (Posun do další fáze)
            approveArticle: function() {
                if(confirm("Je článek formálně v pořádku? Tímto ho posunete do fáze 'Výběr recenzentů'.")) {
                    document.getElementById('articleStatusBadge').innerHTML = 
                        '<span class="badge bg-success">Schváleno - Čeká na přiřazení recenzentů</span>';
                    
                    // Přidáme systémovou zprávu do chatu
                    this.addSystemMessage("Článek byl formálně schválen redaktorem.");
                    alert("Úspěch: Článek byl schválen a posunut dále.");
                }
            },

            // Funkce pro vrácení (Return to author)
            returnArticle: function() {
                const reason = document.getElementById('returnReason').value;
                if(reason.trim() === "") {
                    alert("Musíte uvést důvod vrácení!");
                    return;
                }

                // Zavřít modal
                bootstrap.Modal.getInstance(document.getElementById('returnModal')).hide();

                // Změna stavu
                document.getElementById('articleStatusBadge').innerHTML = 
                    '<span class="badge bg-danger">Vráceno k dopracování</span>';

                // Přidání zprávy do chatu (Jako by to napsal redaktor)
                this.addMessageToChat(reason, true);
                
                alert("Článek byl vrácen autorovi s vašimi připomínkami.");
            },

            // Funkce pro rychlý chat
            sendMessage: function() {
                const input = document.getElementById('chatInput');
                const text = input.value;
                if(text.trim() !== "") {
                    this.addMessageToChat(text, true); // true = jsem redaktor
                    input.value = "";
                }
            },

            // Pomocná funkce pro vložení HTML do chatu
            addMessageToChat: function(text, isEditor) {
                const chatBox = document.getElementById('chatHistory');
                const now = new Date();
                const timeString = now.getHours() + ":" + String(now.getMinutes()).padStart(2, '0');
                
                const userClass = isEditor ? 'editor' : 'author';
                const userName = isEditor ? 'Redaktor (Vy)' : 'Jan Novák';
                const icon = isEditor ? 'fa-user-tie' : 'fa-user';

                const html = `
                    <div class="message ${userClass}">
                        <div class="message-meta"><i class="fa-solid ${icon} me-1"></i> ${userName} • Dnes ${timeString}</div>
                        <div>${text}</div>
                    </div>
                `;
                
                chatBox.insertAdjacentHTML('beforeend', html);
                chatBox.scrollTop = chatBox.scrollHeight; // Scroll dolů
            },

            addSystemMessage: function(text) {
                const chatBox = document.getElementById('chatHistory');
                const html = `<div class="text-center text-muted smallmy-2"><em>--- ${text} ---</em></div>`;
                chatBox.insertAdjacentHTML('beforeend', html);
            }
        };
    </script>

</body>
</html>